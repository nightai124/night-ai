<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåô Night AI ‚Äî Next Generation Neural Network</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #0a0a2a, #1a0033); color: #e0e0ff; min-height: 100vh; overflow-x: hidden; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        header { text-align: center; padding: 30px 0; border-bottom: 1px solid rgba(100, 100, 255, 0.3); }
        .logo { font-size: 3em; margin-bottom: 10px; color: #8a2be2; text-shadow: 0 0 15px #9370db; }
        .tagline { font-size: 1.2em; opacity: 0.8; margin-bottom: 20px; }
        .main { display: flex; flex-wrap: wrap; gap: 30px; margin-top: 30px; }
        .chat-section { flex: 3; min-width: 300px; }
        .admin-section { flex: 2; min-width: 250px; background: rgba(20, 20, 60, 0.7); padding: 20px; border-radius: 15px; border: 1px solid #4444dd; }
        .chat-box { background: rgba(10, 10, 40, 0.8); border-radius: 15px; padding: 20px; height: 500px; overflow-y: auto; border: 1px solid #333399; margin-bottom: 20px; }
        .message { margin-bottom: 15px; padding: 12px 18px; border-radius: 18px; max-width: 85%; clear: both; }
        .user-message { background: linear-gradient(90deg, #3a3a99, #5a5ac9); float: right; border-bottom-right-radius: 5px; }
        .ai-message { background: linear-gradient(90deg, #2a2a66, #4a4aa6); float: left; border-bottom-left-radius: 5px; }
        .typing { display: inline-block; width: 10px; height: 10px; background: #9370db; border-radius: 50%; margin-left: 5px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }
        .input-area { display: flex; gap: 10px; }
        #userInput { flex-grow: 1; padding: 15px; border-radius: 25px; border: none; background: rgba(30, 30, 70, 0.9); color: white; font-size: 1em; }
        #sendBtn { padding: 15px 25px; border-radius: 25px; border: none; background: linear-gradient(90deg, #8a2be2, #4b0082); color: white; font-weight: bold; cursor: pointer; }
        #sendBtn:hover { background: linear-gradient(90deg, #9b3cf3, #5b00a2); }
        .admin-title { color: #ff6b9d; margin-bottom: 15px; font-size: 1.5em; }
        #adminCode { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 10px; border: none; background: rgba(40, 40, 80, 0.9); color: white; }
        #adminAccessBtn { width: 100%; padding: 12px; border-radius: 10px; border: none; background: linear-gradient(90deg, #ff416c, #ff4b2b); color: white; font-weight: bold; cursor: pointer; }
        .hidden { display: none; }
        #adminPanel { margin-top: 20px; }
        .chat-list { max-height: 300px; overflow-y: auto; margin-bottom: 15px; }
        .chat-item { padding: 10px; border-bottom: 1px solid #444; cursor: pointer; }
        .chat-item:hover { background: rgba(255, 255, 255, 0.1); }
        #responseInput { width: 100%; padding: 10px; margin-top: 10px; border-radius: 10px; border: none; background: rgba(40, 40, 80, 0.9); color: white; }
        #sendResponseBtn { width: 100%; padding: 10px; margin-top: 10px; border-radius: 10px; border: none; background: linear-gradient(90deg, #00c6ff, #0072ff); color: white; font-weight: bold; cursor: pointer; }
        footer { text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(100, 100, 255, 0.3); font-size: 0.9em; opacity: 0.7; }
        @media (max-width: 768px) { .main { flex-direction: column; } .chat-box { height: 400px; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo"><i class="fas fa-moon"></i> Night AI</div>
            <div class="tagline">–°–∞–º—ã–π –ø–µ—Ä–µ–¥–æ–≤–æ–π –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –¥–ª—è –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á</div>
            <div style="font-size: 0.9em; margin-top: 10px; color: #aaa;">–í–µ—Ä—Å–∏—è 4.2 | –ù–µ–π—Ä–æ—Å–µ—Ç—å –∞–∫—Ç–∏–≤–Ω–∞</div>
        </header>
        <div class="main">
            <section class="chat-section">
                <h2><i class="fas fa-comments"></i> –î–∏–∞–ª–æ–≥ —Å Night AI</h2>
                <div class="chat-box" id="chatBox">
                    <div class="message ai-message">
                        <strong>Night AI:</strong> –ü—Ä–∏–≤–µ—Ç! –Ø Night AI ‚Äî –Ω–µ–π—Ä–æ—Å–µ—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è. –°–ø—Ä–æ—Å–∏ –º–µ–Ω—è –æ —á—ë–º —É–≥–æ–¥–Ω–æ: —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –Ω–∞—É–∫–∞, —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è. <span id="typed"></span>
                    </div>
                </div>
                <div class="input-area">
                    <input type="text" id="userInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∑–∞–ø—Ä–æ—Å –∑–¥–µ—Å—å...">
                    <button id="sendBtn"><i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
                <div style="margin-top: 15px; font-size: 0.8em; color: #888;">
                    <i class="fas fa-info-circle"></i> Night AI –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–æ 30 —Å–µ–∫—É–Ω–¥.
                </div>
            </section>
            <section class="admin-section">
                <h3 class="admin-title"><i class="fas fa-user-secret"></i> –°–µ–∫—Ä–µ—Ç–Ω–∞—è –ø–∞–Ω–µ–ª—å (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)</h3>
                <input type="password" id="adminCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –º–∞—Å—Ç–µ—Ä-–∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞">
                <button id="adminAccessBtn"><i class="fas fa-unlock"></i> –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø</button>
                <div id="adminPanel" class="hidden">
                    <h4><i class="fas fa-users"></i> –ê–∫—Ç–∏–≤–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏</h4>
                    <div class="chat-list" id="chatList"></div>
                    <h4><i class="fas fa-reply"></i> –û—Ç–≤–µ—Ç –æ—Ç –∏–º–µ–Ω–∏ –ò–ò</h4>
                    <textarea id="responseInput" rows="3" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å..."></textarea>
                    <button id="sendResponseBtn"><i class="fas fa-share-square"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ Night AI</button>
                    <div style="margin-top: 15px; font-size: 0.7em; color: #aaa;">
                        <i class="fas fa-exclamation-triangle"></i> –≠—Ç–∞ –ø–∞–Ω–µ–ª—å –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–∞–º. –ù–µ —Å–æ–æ–±—â–∞–π—Ç–µ –∫–æ–¥ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º.
                    </div>
                </div>
            </section>
        </div>
        <footer>
            <p>¬© 2024 Night AI Project. –í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç—å –∑–∞—â–∏—â–µ–Ω—ã. | <a href="#" style="color: #8a2be2;">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a> | <a href="#" style="color: #8a2be2;">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</a></p>
            <p style="margin-top: 5px;">–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ NeuroWeb v4.2 | –°—Ç–∞—Ç—É—Å: <span style="color: #7cfc00;">‚óè –û–Ω–ª–∞–π–Ω</span></p>
        </footer>
    </div>

    <script>
        // ================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ==================
        const MASTER_CODE = "NIGHT_ADMIN_2024"; // –ú–∞—Å—Ç–µ—Ä-–∫–æ–¥ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ
        let currentUser = "User_" + Math.floor(Math.random() * 10000);
        let allChats = {}; // { userId: { messages: [{user, ai}], username } }
        let selectedUserId = null;

        // ================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–ê ==================
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–º–∏—Ç–∞—Ü–∏—è –ø–µ—á–∞—Ç–∞—é—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–∏
            new Typed('#typed', {
                strings: ['–Ø —É–º–µ—é –ø–∏—Å–∞—Ç—å –∫–æ–¥.', '–Ø –≥–µ–Ω–µ—Ä–∏—Ä—É—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.', '–Ø —Ä–µ—à–∞—é —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏.'],
                typeSpeed: 50,
                backSpeed: 30,
                loop: true
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
            document.getElementById('sendBtn').addEventListener('click', sendUserMessage);
            document.getElementById('userInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendUserMessage();
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ
            document.getElementById('adminAccessBtn').addEventListener('click', function() {
                const code = document.getElementById('adminCode').value;
                if (code === MASTER_CODE) {
                    document.getElementById('adminPanel').classList.remove('hidden');
                    loadChatsForAdmin();
                    setInterval(loadChatsForAdmin, 3000); // –û–±–Ω–æ–≤–ª—è—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫
                    alert("–î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω! –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞.");
                } else {
                    alert("–ù–µ–≤–µ—Ä–Ω—ã–π –º–∞—Å—Ç–µ—Ä-–∫–æ–¥! –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω.");
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∏–º–µ–Ω–∏ –ò–ò
            document.getElementById('sendResponseBtn').addEventListener('click', sendAIResponse);
        });

        // ================== –§–£–ù–ö–¶–ò–ò –ß–ê–¢–ê ==================
        function sendUserMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            if (!message) return;

            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            addMessageToUI('user', message);
            input.value = '';

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ "–±–∞–∑—É" (allChats)
            if (!allChats[currentUser]) {
                allChats[currentUser] = { messages: [], username: currentUser };
            }
            allChats[currentUser].messages.push({ user: message, ai: null });

            // –ò–º–∏—Ç–∞—Ü–∏—è "–¥—É–º–∞–Ω–∏—è" –ò–ò
            const thinkingMsg = addMessageToUI('ai', '');
            const thinkingEl = thinkingMsg.querySelector('.ai-text');
            thinkingEl.innerHTML = '<strong>Night AI:</strong> <span class="typing"></span><span class="typing"></span><span class="typing"></span>';

            // –ß–µ—Ä–µ–∑ 2-5 —Å–µ–∫—É–Ω–¥ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –∏–∑ –∞–¥–º–∏–Ω–∫–∏
            setTimeout(() => {
                if (allChats[currentUser].messages[allChats[currentUser].messages.length - 1].ai === null) {
                    thinkingEl.innerHTML = '<strong>Night AI:</strong> –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∑–∞–ø—Ä–æ—Å... (–æ–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–∞)';
                }
            }, 2000);
        }

        function addMessageToUI(sender, text) {
            const chatBox = document.getElementById('chatBox');
            const messageDiv = document.createElement('div');
            messageDiv.className = sender === 'user' ? 'message user-message' : 'message ai-message';
            messageDiv.innerHTML = `<strong>${sender === 'user' ? '–í—ã' : 'Night AI'}:</strong> <span class="${sender}-text">${text}</span>`;
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
            return messageDiv;
        }

        // ================== –§–£–ù–ö–¶–ò–ò –ê–î–ú–ò–ù–ö–ò ==================
        function loadChatsForAdmin() {
            const chatList = document.getElementById('chatList');
            chatList.innerHTML = '';
            for (const [userId, data] of Object.entries(allChats)) {
                const lastMsg = data.messages.slice(-1)[0];
                const chatItem = document.createElement('div');
                chatItem.className = 'chat-item';
                chatItem.innerHTML = `<strong>${data.username}</strong><br><small>${lastMsg ? lastMsg.user : '–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π'}</small>`;
                chatItem.addEventListener('click', () => {
                    selectedUserId = userId;
                    document.getElementById('responseInput').placeholder = `–û—Ç–≤–µ—Ç –¥–ª—è ${data.username}...`;
                    Array.from(chatList.children).forEach(item => item.style.background = '');
                    chatItem.style.background = 'rgba(100, 100, 255, 0.3)';
                });
                chatList.appendChild(chatItem);
            }
        }

        function sendAIResponse() {
            const responseInput = document.getElementById('responseInput');
            const response = responseInput.value.trim();
            if (!response || !selectedUserId) {
                alert("–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–∞–ª–æ–≥ –∏ –≤–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç!");
                return;
            }

            // –ù–∞—Ö–æ–¥–∏–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–µ–∑ –æ—Ç–≤–µ—Ç–∞ –ò–ò
            const userChat = allChats[selectedUserId];
            const lastMsg = userChat.messages.slice(-1)[0];
            if (lastMsg && lastMsg.ai === null) {
                lastMsg.ai = response;

                // –ï—Å–ª–∏ —ç—Ç–æ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —á–∞—Ç–µ, –æ–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                if (selectedUserId === currentUser) {
                    const aiMessages = document.querySelectorAll('.ai-message');
                    const lastAiMsg = aiMessages[aiMessages.length - 1];
                    if (lastAiMsg && lastAiMsg.querySelector('.ai-text').innerText.includes('–æ–∂–∏–¥–∞–π—Ç–µ')) {
                        lastAiMsg.querySelector('.ai-text').innerHTML = `<strong>Night AI:</strong> ${response}`;
                    }
                }

                responseInput.value = '';
                alert("–û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∫–∞–∫ Night AI!");
            } else {
                alert("–î–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.");
            }
        }
    </script>
</body>
</html>
