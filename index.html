<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåô Night AI ‚Äî –£–º–Ω—ã–π —á–∞—Ç-–ø–æ–º–æ—â–Ω–∏–∫</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: #0a0a1a;
            --bg-secondary: #15152b;
            --bg-chat-user: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            --bg-chat-ai: linear-gradient(135deg, #1a2a3a 0%, #2c3e50 100%);
            --bg-input: rgba(255, 255, 255, 0.07);
            --text-primary: #ffffff;
            --text-secondary: #b0b7d6;
            --accent-purple: #8a2be2;
            --accent-blue: #00bfff;
            --accent-green: #00ffaa;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            --border-radius: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(100, 80, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 100, 255, 0.1) 0%, transparent 20%);
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: var(--bg-secondary);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* –®–∞–ø–∫–∞ */
        .header {
            background: linear-gradient(90deg, var(--accent-purple), #4a00e0);
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .logo {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(to right, #fff, var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .tagline {
            font-size: 1rem;
            opacity: 0.9;
            color: var(--text-secondary);
        }

        .user-badge {
            position: absolute;
            top: 20px;
            right: 25px;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 15px;
            border-radius: 50px;
            font-size: 0.9rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* –≠–∫—Ä–∞–Ω –ª–æ–≥–∏–Ω–∞ */
        #loginScreen {
            padding: 60px 40px;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        .login-title {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--accent-blue);
        }

        .login-subtitle {
            color: var(--text-secondary);
            margin-bottom: 40px;
        }

        .login-input {
            width: 100%;
            max-width: 400px;
            padding: 18px 25px;
            margin: 20px auto;
            border: none;
            border-radius: 50px;
            background: var(--bg-input);
            color: white;
            font-size: 1.1rem;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .login-input:focus {
            outline: none;
            border-color: var(--accent-purple);
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);
        }

        .login-btn {
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-blue));
            color: white;
            border: none;
            padding: 18px 50px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 20px;
        }

        .login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(138, 43, 226, 0.4);
        }

        /* –ß–∞—Ç */
        #chatScreen {
            display: none;
            height: 70vh;
            flex-direction: column;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 25px;
        }

        #chatLog {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            margin-bottom: 20px;
            background: rgba(10, 10, 20, 0.5);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            max-width: 75%;
            padding: 18px 22px;
            border-radius: 25px;
            line-height: 1.5;
            word-wrap: break-word;
            animation: messageAppear 0.3s ease;
        }

        .user-message {
            align-self: flex-end;
            background: var(--bg-chat-user);
            color: white;
            border-bottom-right-radius: 5px;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
        }

        .ai-message {
            align-self: flex-start;
            background: var(--bg-chat-ai);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom-left-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .message-sender {
            font-weight: bold;
            font-size: 0.85rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-message .message-sender {
            color: #b3e0ff;
        }

        .ai-message .message-sender {
            color: var(--accent-green);
        }

        .message-text {
            font-size: 1.05rem;
        }

        /* –ü–∞–Ω–µ–ª—å –≤–≤–æ–¥–∞ */
        .input-area {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        #userInput {
            flex: 1;
            padding: 20px 25px;
            border: none;
            border-radius: 50px;
            background: var(--bg-input);
            color: white;
            font-size: 1.1rem;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        #userInput:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 20px rgba(0, 191, 255, 0.3);
        }

        #sendBtn {
            background: linear-gradient(90deg, var(--accent-green), #00cc88);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #sendBtn:hover {
            transform: scale(1.1);
        }

        #sendBtn:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
        }

        .typing-indicator {
            padding: 15px;
            color: var(--text-secondary);
            font-style: italic;
            text-align: center;
        }

        /* –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å */
        #adminPanel {
            background: rgba(0, 20, 40, 0.8);
            margin: 25px;
            padding: 25px;
            border-radius: var(--border-radius);
            border: 1px solid rgba(0, 255, 255, 0.2);
            display: none;
        }

        .admin-title {
            color: var(--accent-green);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-section {
            margin-bottom: 25px;
        }

        #adminChats {
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .admin-chat-item {
            padding: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: background 0.2s;
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .admin-chat-item:hover, .admin-chat-item.selected {
            background: rgba(100, 100, 255, 0.2);
        }

        #adminResponse {
            width: 100%;
            padding: 18px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--accent-purple);
            border-radius: 15px;
            color: white;
            font-size: 1rem;
            margin-bottom: 15px;
            min-height: 100px;
        }

        #adminSend {
            background: linear-gradient(90deg, #ff416c, #ff4b2b);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: transform 0.3s;
        }

        #adminSend:hover {
            transform: translateY(-3px);
        }

        #adminToggle {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            margin: 0 auto;
            display: block;
            transition: all 0.3s;
        }

        #adminToggle:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--accent-blue);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes messageAppear {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤ */
        @media (max-width: 768px) {
            .container { border-radius: 15px; }
            .header { padding: 20px; }
            .logo { font-size: 2.2rem; }
            .user-badge { position: static; margin-top: 15px; display: inline-block; }
            #chatLog { padding: 15px; }
            .message { max-width: 90%; }
            .input-area { flex-direction: column; }
            #sendBtn { width: 100%; border-radius: 20px; height: 55px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo"><i class="fas fa-moon"></i> Night AI</div>
            <div class="tagline">–°–∞–º—ã–π –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ò–ò –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ –∏ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á</div>
            <div id="userBadge" class="user-badge" style="display: none;">
                <i class="fas fa-user"></i> <span id="currentUserNameDisplay">–ì–æ—Å—Ç—å</span>
            </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ª–æ–≥–∏–Ω–∞ -->
        <div id="loginScreen">
            <h1 class="login-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Night AI</h1>
            <p class="login-subtitle">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –Ω–µ–π—Ä–æ—Å–µ—Ç—å—é</p>
            <input type="text" id="usernameInput" class="login-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê–ª–µ–∫—Å–µ–π_–ö—Ä–µ–∞—Ç–∏–≤" maxlength="20">
            <button class="login-btn" onclick="login()"><i class="fas fa-rocket"></i> –í–æ–π—Ç–∏ –≤ —á–∞—Ç</button>
            <p id="loginStatus" style="margin-top: 20px; color: #ff9999;"></p>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —á–∞—Ç–∞ -->
        <div id="chatScreen">
            <div class="chat-container">
                <div id="chatLog">
                    <div class="message ai-message">
                        <div class="message-sender"><i class="fas fa-robot"></i> Night AI</div>
                        <div class="message-text">–ü—Ä–∏–≤–µ—Ç! –Ø Night AI ‚Äî –Ω–µ–π—Ä–æ—Å–µ—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è. –ì–æ—Ç–æ–≤–∞ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤—É, –Ω–∞—É–∫–µ –∏ –º–Ω–æ–≥–æ–º—É –¥—Ä—É–≥–æ–º—É. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?</div>
                    </div>
                </div>

                <div class="typing-indicator" id="typingIndicator" style="display: none;">
                    <i class="fas fa-ellipsis-h"></i> Night AI –ø–µ—á–∞—Ç–∞–µ—Ç –æ—Ç–≤–µ—Ç...
                </div>

                <div class="input-area">
                    <input type="text" id="userInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button id="sendBtn" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –∏ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞ -->
            <button id="adminToggle" onclick="toggleAdminPanel()"><i class="fas fa-user-secret"></i> –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</button>
            <div id="adminPanel">
                <h3 class="admin-title"><i class="fas fa-cogs"></i> –°–µ–∫—Ä–µ—Ç–Ω–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                
                <div class="admin-section">
                    <h4><i class="fas fa-users"></i> –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h4>
                    <div id="adminChats">
                        <!-- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å -->
                    </div>
                </div>

                <div class="admin-section">
                    <h4><i class="fas fa-reply"></i> –û—Ç–≤–µ—Ç –æ—Ç –∏–º–µ–Ω–∏ Night AI</h4>
                    <p>–í—ã–±—Ä–∞–Ω: <strong id="selectedUser">–Ω–∏–∫—Ç–æ</strong></p>
                    <textarea id="adminResponse" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞..."></textarea>
                    <button id="adminSend" onclick="sendAdminResponse()"><i class="fas fa-share-square"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ –ò–ò</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== –ö–û–ù–°–¢–ê–ù–¢–´ ====================
        const ADMIN_CODE = "ADMIN2024";
        const STORAGE_KEY = "nightAI_user";

        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        let currentUser = null;
        let allChats = {};
        let selectedAdminUser = null;
        let messageQueue = {};

        // ==================== –ó–ê–ì–†–£–ó–ö–ê –ò –°–û–•–†–ê–ù–ï–ù–ò–ï –õ–û–ì–ò–ù–ê ====================
        function loadUser() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                currentUser = saved;
                showChatScreen();
            }
        }

        function saveUser(username) {
            localStorage.setItem(STORAGE_KEY, username);
        }

        function logout() {
            localStorage.removeItem(STORAGE_KEY);
            currentUser = null;
            showLoginScreen();
        }

        // ==================== –õ–û–ì–ò–ù ====================
        function login() {
            const input = document.getElementById('usernameInput');
            const username = input.value.trim().replace(/[^a-zA-Z0-9–∞-—è–ê-–Ø_]/g, '');
            if (username.length < 2) {
                showMessage('loginStatus', "–õ–æ–≥–∏–Ω —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π!", true);
                return;
            }
            if (username.length > 20) {
                showMessage('loginStatus', "–õ–æ–≥–∏–Ω —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π!", true);
                return;
            }

            currentUser = username;
            saveUser(username);
            showChatScreen();
            showMessage('chatLog', `üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${username}!`, false, 'ai');
        }

        function showLoginScreen() {
            document.getElementById('loginScreen').style.display = 'block';
            document.getElementById('chatScreen').style.display = 'none';
            document.getElementById('userBadge').style.display = 'none';
        }

        function showChatScreen() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('chatScreen').style.display = 'flex';
            document.getElementById('userBadge').style.display = 'block';
            document.getElementById('currentUserNameDisplay').textContent = currentUser;
            document.getElementById('userInput').focus();
            updateChatLog();
        }

        // ==================== –û–°–ù–û–í–ù–û–ô –ß–ê–¢ ====================
        function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if (!text || !currentUser) return;

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (!allChats[currentUser]) allChats[currentUser] = [];
            allChats[currentUser].push({ sender: currentUser, text, time: new Date() });
            appendMessage(currentUser, text, 'user');
            input.value = '';

            // –°–∏–º—É–ª—è—Ü–∏—è –ø–µ—á–∞—Ç–∏ –ò–ò
            document.getElementById('typingIndicator').style.display = 'block';
            document.getElementById('sendBtn').disabled = true;

            // –°—Ç–∞–≤–∏–º –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –∞–¥–º–∏–Ω–∞
            if (!messageQueue[currentUser]) messageQueue[currentUser] = [];
            messageQueue[currentUser].push(text);

            // –ê–≤—Ç–æ-–æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫, –µ—Å–ª–∏ –∞–¥–º–∏–Ω –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª
            setTimeout(() => {
                if (messageQueue[currentUser] && messageQueue[currentUser].includes(text)) {
                    const replies = [
                        "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –∑–∞–ø—Ä–æ—Å! –Ø –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é...",
                        "–î–∞–π—Ç–µ –º–Ω–µ —Å–µ–∫—É–Ω–¥—É, —á—Ç–æ–±—ã –ø–æ–¥—É–º–∞—Ç—å –Ω–∞–¥ —ç—Ç–∏–º.",
                        "–°–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.",
                        "–Ø –µ—â—ë —É—á—É—Å—å, –Ω–æ —Å–∫–æ—Ä–æ –¥–∞–º —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç."
                    ];
                    const reply = replies[Math.floor(Math.random() * replies.length)];
                    if (!allChats[currentUser]) allChats[currentUser] = [];
                    allChats[currentUser].push({ sender: 'Night AI', text: reply, time: new Date() });
                    appendMessage('Night AI', reply, 'ai');
                    document.getElementById('typingIndicator').style.display = 'none';
                    document.getElementById('sendBtn').disabled = false;
                }
            }, 5000);
        }

        function appendMessage(sender, text, type) {
            const chatLog = document.getElementById('chatLog');
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${type}-message`;
            msgDiv.innerHTML = `
                <div class="message-sender">
                    <i class="fas ${type === 'user' ? 'fa-user' : 'fa-robot'}"></i> ${sender}
                </div>
                <div class="message-text">${text}</div>
            `;
            chatLog.appendChild(msgDiv);
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        function updateChatLog() {
            const chatLog = document.getElementById('chatLog');
            chatLog.innerHTML = '';
            if (allChats[currentUser]) {
                allChats[currentUser].forEach(msg => {
                    appendMessage(msg.sender, msg.text, msg.sender === currentUser ? 'user' : 'ai');
                });
            } else {
                appendMessage('Night AI', '–ü—Ä–∏–≤–µ—Ç! –Ø Night AI. –ó–∞–¥–∞–π—Ç–µ –º–Ω–µ –≤–æ–ø—Ä–æ—Å.', 'ai');
            }
        }

        // ==================== –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨ ====================
        function toggleAdminPanel() {
            const panel = document.getElementById('adminPanel');
            const isHidden = panel.style.display === 'none';
            panel.style.display = isHidden ? 'block' : 'none';
            if (isHidden) checkAdminAccess();
        }

        function checkAdminAccess() {
            const code = prompt("–í–≤–µ–¥–∏—Ç–µ –º–∞—Å—Ç–µ—Ä-–∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞:");
            if (code === ADMIN_CODE) {
                loadAdminPanel();
                setInterval(loadAdminPanel, 2000);
            } else {
                alert("–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω!");
                document.getElementById('adminPanel').style.display = 'none';
            }
        }

        function loadAdminPanel() {
            const container = document.getElementById('adminChats');
            container.innerHTML = '';
            for (const user in allChats) {
                const lastMsg = allChats[user][allChats[user].length - 1];
                const div = document.createElement('div');
                div.className = `admin-chat-item ${selectedAdminUser === user ? 'selected' : ''}`;
                div.innerHTML = `<strong>${user}</strong>: ${lastMsg ? lastMsg.text.substring(0, 50) + '...' : '–Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π'}`;
                div.onclick = () => {
                    selectedAdminUser = user;
                    document.getElementById('selectedUser').textContent = user;
                    loadAdminPanel();
                };
                container.appendChild(div);
            }
        }

        function sendAdminResponse() {
            const text = document.getElementById('adminResponse').value.trim();
            if (!selectedAdminUser || !text) return alert("–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç!");

            if (!allChats[selectedAdminUser]) allChats[selectedAdminUser] = [];
            allChats[selectedAdminUser].push({ sender: 'Night AI', text, time: new Date() });

            if (selectedAdminUser === currentUser) {
                appendMessage('Night AI', text, 'ai');
                document.getElementById('typingIndicator').style.display = 'none';
                document.getElementById('sendBtn').disabled = false;
            }

            document.getElementById('adminResponse').value = '';
            alert("–û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
        }

        // ==================== –£–¢–ò–õ–ò–¢–´ ====================
        function showMessage(elementId, text, isError, sender) {
            const el = document.getElementById(elementId);
            if (sender) {
                appendMessage(sender === 'ai' ? 'Night AI' : currentUser, text, sender);
            } else {
                el.textContent = text;
                el.style.color = isError ? '#ff5555' : '#55ff55';
                setTimeout(() => el.textContent = '', 3000);
            }
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        document.addEventListener('DOMContentLoaded', () => {
            loadUser();
            document.getElementById('userInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
            document.getElementById('adminResponse').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && e.ctrlKey) sendAdminResponse();
            });
        });
    </script>
</body>
</html>
